package com.cherryperry.amiami.model.update

import okhttp3.mockwebserver.MockResponse
import okhttp3.mockwebserver.MockWebServer
import org.junit.After
import org.junit.Assert
import org.junit.Before
import org.junit.Test
import org.junit.runner.RunWith
import org.springframework.http.HttpHeaders
import org.springframework.http.HttpStatus
import org.springframework.http.MediaType
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner
import org.springframework.web.client.HttpServerErrorException

@RunWith(SpringJUnit4ClassRunner::class)
class AmiamiRestClientTest {

    private lateinit var server: MockWebServer
    private lateinit var amiamiRestClient: AmiamiRestClient

    @Before
    fun before() {
        server = MockWebServer()
        amiamiRestClient = AmiamiRestClient(server.url("/").toString())
    }

    @Test
    fun testSuccessRequest() {
        server.enqueue(MockResponse()
            .setResponseCode(HttpStatus.OK.value())
            .setHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON)
            .setBody("""{"RSuccess":true,"RValue":null,"RMessage":"OK","search_result":{"total_results":4712},"items":[{"gcode":"FIGURE-032253-R","gname":"Fate/Grand Order - Scathach Loungewear Mode 1/7 Complete Figure","thumb_url":"/images/product/main/173/FIGURE-032253.jpg","thumb_alt":"FIGURE-032253.jpg","thumb_title":"Fate/Grand Order - Scathach Loungewear Mode 1/7 Complete Figure","min_price":11580,"max_price":11580,"c_price_taxed":13824,"maker_name":"Alter","saleitem":0,"condition_flg":1,"list_preorder_available":0,"list_backorder_available":0,"list_store_bonus":0,"list_amiami_limited":0,"instock_flg":1,"order_closed_flg":0,"element_id":null,"salestatus":null,"salestatus_detail":null,"releasedate":"2018/04/30 0:00:00","jancode":"4560228204650","preorderitem":0,"saletopitem":0,"resale_flg":0,"preowned_sale_flg":null,"for_women_flg":0,"genre_moe":1,"cate6":null,"cate7":null,"buy_flg":1,"buy_price":7500,"buy_remarks":null,"stock_flg":1,"image_on":1,"image_category":"173/","image_name":"FIGURE-032253","metaalt":null},{"gcode":"FIG-MOE-07172-R","gname":"Nendoroid - Hatsune Miku Yukata Ver. [39's CARABAN presents Natsumatsuri 2012 in Yokohama Hakkeijima Sea Paradise, Goodsmile Online Shop Exclusive]","thumb_url":"/images/product/main/124/FIG-MOE-07172.jpg","thumb_alt":"FIG-MOE-07172.jpg","thumb_title":"Nendoroid - Hatsune Miku Yukata Ver. [39's CARABAN presents Natsumatsuri 2012 in Yokohama Hakkeijima Sea Paradise, Goodsmile Online Shop Exclusive]","min_price":2390,"max_price":2580,"c_price_taxed":3085,"maker_name":"Good Smile Company","saleitem":0,"condition_flg":1,"list_preorder_available":0,"list_backorder_available":0,"list_store_bonus":0,"list_amiami_limited":0,"instock_flg":1,"order_closed_flg":0,"element_id":null,"salestatus":null,"salestatus_detail":null,"releasedate":"2012/09/19 0:00:00","jancode":"4582191969459","preorderitem":0,"saletopitem":0,"resale_flg":0,"preowned_sale_flg":null,"for_women_flg":0,"genre_moe":1,"cate6":null,"cate7":null,"buy_flg":1,"buy_price":1400,"buy_remarks":null,"stock_flg":1,"image_on":1,"image_category":"124/","image_name":"FIG-MOE-07172","metaalt":null},{"gcode":"FIG-MOE-2107-R","gname":"Nendoroid - Hatsune Miku Absolute HMO Edition Character Vocal Series 01","thumb_url":"/images/product/main/103/FIG-MOE-2107.jpg","thumb_alt":"FIG-MOE-2107.jpg","thumb_title":"Nendoroid - Hatsune Miku Absolute HMO Edition Character Vocal Series 01","min_price":2980,"max_price":2980,"c_price_taxed":4114,"maker_name":"Good Smile Company","saleitem":0,"condition_flg":1,"list_preorder_available":0,"list_backorder_available":0,"list_store_bonus":0,"list_amiami_limited":0,"instock_flg":1,"order_closed_flg":0,"element_id":null,"salestatus":null,"salestatus_detail":null,"releasedate":"2011/01/28 0:00:00","jancode":"4582191967332","preorderitem":0,"saletopitem":0,"resale_flg":0,"preowned_sale_flg":null,"for_women_flg":0,"genre_moe":1,"cate6":null,"cate7":null,"buy_flg":1,"buy_price":1700,"buy_remarks":null,"stock_flg":1,"image_on":1,"image_category":"103/","image_name":"FIG-MOE-2107","metaalt":null},{"gcode":"FIGURE-031255-R","gname":"B-STYLE - To Love-Ru Darkness: Mikan Yuuki Bunny Ver. 1/4 Complete Figure","thumb_url":"/images/product/main/172/FIGURE-031255.jpg","thumb_alt":"FIGURE-031255.jpg","thumb_title":"B-STYLE - To Love-Ru Darkness: Mikan Yuuki Bunny Ver. 1/4 Complete Figure","min_price":21280,"max_price":21280,"c_price_taxed":23800,"maker_name":"FREEing","saleitem":0,"condition_flg":1,"list_preorder_available":0,"list_backorder_available":0,"list_store_bonus":0,"list_amiami_limited":0,"instock_flg":1,"order_closed_flg":0,"element_id":null,"salestatus":null,"salestatus_detail":null,"releasedate":"2018/02/28 0:00:00","jancode":"4571245297242","preorderitem":0,"saletopitem":0,"resale_flg":0,"preowned_sale_flg":null,"for_women_flg":0,"genre_moe":1,"cate6":null,"cate7":null,"buy_flg":1,"buy_price":14000,"buy_remarks":null,"stock_flg":1,"image_on":1,"image_category":"172/","image_name":"FIGURE-031255","metaalt":null},{"gcode":"FIGURE-031083-R","gname":"Super Sonico Anniversary Figure -Super Sonico-san (31)- Blue (Game-prize)","thumb_url":"/images/product/main/181/FIGURE-031083.jpg","thumb_alt":"FIGURE-031083.jpg","thumb_title":"Super Sonico Anniversary Figure -Super Sonico-san (31)- Blue (Game-prize)","min_price":2580,"max_price":2580,"c_price_taxed":0,"maker_name":"FuRyu","saleitem":0,"condition_flg":1,"list_preorder_available":0,"list_backorder_available":0,"list_store_bonus":0,"list_amiami_limited":0,"instock_flg":1,"order_closed_flg":0,"element_id":null,"salestatus":null,"salestatus_detail":null,"releasedate":"2017/12/31 0:00:00","jancode":null,"preorderitem":0,"saletopitem":0,"resale_flg":0,"preowned_sale_flg":null,"for_women_flg":0,"genre_moe":1,"cate6":null,"cate7":null,"buy_flg":1,"buy_price":1400,"buy_remarks":null,"stock_flg":1,"image_on":1,"image_category":"181/","image_name":"FIGURE-031083","metaalt":null},{"gcode":"FIGURE-012855-R","gname":"Armor Girls Project - MS Girl Gundam Mk-II (Titans Colors) \"Mobile Suit Zeta Gundam\"","thumb_url":"/images/product/main/153/FIGURE-012855.jpg","thumb_alt":"FIGURE-012855.jpg","thumb_title":"Armor Girls Project - MS Girl Gundam Mk-II (Titans Colors) \"Mobile Suit Zeta Gundam\"","min_price":10080,"max_price":10080,"c_price_taxed":11880,"maker_name":"Bandai","saleitem":0,"condition_flg":1,"list_preorder_available":0,"list_backorder_available":0,"list_store_bonus":0,"list_amiami_limited":0,"instock_flg":1,"order_closed_flg":0,"element_id":null,"salestatus":null,"salestatus_detail":null,"releasedate":"2015/12/31 0:00:00","jancode":"4549660018506","preorderitem":0,"saletopitem":0,"resale_flg":0,"preowned_sale_flg":null,"for_women_flg":0,"genre_moe":0,"cate6":null,"cate7":null,"buy_flg":1,"buy_price":6500,"buy_remarks":null,"stock_flg":1,"image_on":1,"image_category":"153/","image_name":"FIGURE-012855","metaalt":null},{"gcode":"TOY-GDM-1115-R","gname":"Robot Spirits -SIDE MS- Gundam F91","thumb_url":"/images/product/main/101/TOY-GDM-1115.jpg","thumb_alt":"TOY-GDM-1115.jpg","thumb_title":"Robot Spirits -SIDE MS- Gundam F91","min_price":2780,"max_price":2780,"c_price_taxed":3240,"maker_name":"Bandai","saleitem":0,"condition_flg":1,"list_preorder_available":0,"list_backorder_available":0,"list_store_bonus":0,"list_amiami_limited":0,"instock_flg":1,"order_closed_flg":0,"element_id":null,"salestatus":null,"salestatus_detail":null,"releasedate":"2013/02/28 0:00:00","jancode":"4543112599162","preorderitem":0,"saletopitem":0,"resale_flg":0,"preowned_sale_flg":null,"for_women_flg":0,"genre_moe":0,"cate6":null,"cate7":null,"buy_flg":1,"buy_price":2000,"buy_remarks":null,"stock_flg":1,"image_on":1,"image_category":"101/","image_name":"TOY-GDM-1115","metaalt":null},{"gcode":"FIGURE-012170-R","gname":"METAL BUILD - Strike Freedom Gundam \"Mobile Suit Gundam SEED Destiny\"","thumb_url":"/images/product/main/153/FIGURE-012170.jpg","thumb_alt":"FIGURE-012170.jpg","thumb_title":"METAL BUILD - Strike Freedom Gundam \"Mobile Suit Gundam SEED Destiny\"","min_price":51360,"max_price":64180,"c_price_taxed":27000,"maker_name":"Bandai","saleitem":0,"condition_flg":1,"list_preorder_available":0,"list_backorder_available":0,"list_store_bonus":0,"list_amiami_limited":0,"instock_flg":1,"order_closed_flg":0,"element_id":null,"salestatus":null,"salestatus_detail":null,"releasedate":"2015/11/30 0:00:00","jancode":"4549660012795","preorderitem":0,"saletopitem":0,"resale_flg":0,"preowned_sale_flg":null,"for_women_flg":0,"genre_moe":0,"cate6":null,"cate7":null,"buy_flg":1,"buy_price":43000,"buy_remarks":null,"stock_flg":1,"image_on":1,"image_category":"153/","image_name":"FIGURE-012170","metaalt":null},{"gcode":"FIGURE-001985-R","gname":"S.H. Figuarts - Kamen Rider Agito Burning Form from \"Kamen Rider Agito\"","thumb_url":"/images/product/main/133/FIGURE-001985.jpg","thumb_alt":"FIGURE-001985.jpg","thumb_title":"S.H. Figuarts - Kamen Rider Agito Burning Form from \"Kamen Rider Agito\"","min_price":2480,"max_price":2480,"c_price_taxed":4320,"maker_name":"Bandai","saleitem":0,"condition_flg":1,"list_preorder_available":0,"list_backorder_available":0,"list_store_bonus":0,"list_amiami_limited":0,"instock_flg":1,"order_closed_flg":0,"element_id":null,"salestatus":null,"salestatus_detail":null,"releasedate":"2013/12/28 0:00:00","jancode":"4543112828613","preorderitem":0,"saletopitem":0,"resale_flg":0,"preowned_sale_flg":null,"for_women_flg":0,"genre_moe":0,"cate6":null,"cate7":null,"buy_flg":1,"buy_price":1400,"buy_remarks":null,"stock_flg":1,"image_on":1,"image_category":"133/","image_name":"FIGURE-001985","metaalt":null},{"gcode":"FIGURE-005284-R","gname":"METAL BUILD - Laevatein (First Press Limited Package)","thumb_url":"/images/product/main/142/FIGURE-005284.jpg","thumb_alt":"FIGURE-005284.jpg","thumb_title":"METAL BUILD - Laevatein (First Press Limited Package)","min_price":15180,"max_price":15180,"c_price_taxed":18360,"maker_name":"Bandai","saleitem":0,"condition_flg":1,"list_preorder_available":0,"list_backorder_available":0,"list_store_bonus":0,"list_amiami_limited":0,"instock_flg":1,"order_closed_flg":0,"element_id":null,"salestatus":null,"salestatus_detail":null,"releasedate":"2014/07/28 0:00:00","jancode":"4543112836748","preorderitem":0,"saletopitem":0,"resale_flg":0,"preowned_sale_flg":null,"for_women_flg":0,"genre_moe":0,"cate6":null,"cate7":null,"buy_flg":1,"buy_price":12000,"buy_remarks":null,"stock_flg":1,"image_on":1,"image_category":"142/","image_name":"FIGURE-005284","metaalt":null},{"gcode":"TOY-TOK-0889-R","gname":"S.H. Figuarts - Kamen Rider Kuuga Ultimate Form","thumb_url":"/images/product/main/102/TOY-TOK-0889.jpg","thumb_alt":"TOY-TOK-0889.jpg","thumb_title":"S.H. Figuarts - Kamen Rider Kuuga Ultimate Form","min_price":2480,"max_price":2480,"c_price_taxed":3564,"maker_name":"Bandai","saleitem":0,"condition_flg":1,"list_preorder_available":0,"list_backorder_available":0,"list_store_bonus":0,"list_amiami_limited":0,"instock_flg":1,"order_closed_flg":0,"element_id":null,"salestatus":null,"salestatus_detail":null,"releasedate":"2011/11/28 0:00:00","jancode":"4543112613684","preorderitem":0,"saletopitem":0,"resale_flg":0,"preowned_sale_flg":null,"for_women_flg":0,"genre_moe":0,"cate6":null,"cate7":null,"buy_flg":1,"buy_price":1400,"buy_remarks":null,"stock_flg":1,"image_on":1,"image_category":"102/","image_name":"TOY-TOK-0889","metaalt":null},{"gcode":"FIGURE-005314-R","gname":"Shining Ark - Kilmaria Aideen 1/8 Complete Figure (w/First Press Limited Bonus: Serpent HB)","thumb_url":"/images/product/main/141/FIGURE-005314.jpg","thumb_alt":"FIGURE-005314.jpg","thumb_title":"Shining Ark - Kilmaria Aideen 1/8 Complete Figure (w/First Press Limited Bonus: Serpent HB)","min_price":5760,"max_price":5880,"c_price_taxed":10584,"maker_name":"Kotobukiya","saleitem":0,"condition_flg":1,"list_preorder_available":0,"list_backorder_available":0,"list_store_bonus":0,"list_amiami_limited":0,"instock_flg":1,"order_closed_flg":0,"element_id":null,"salestatus":null,"salestatus_detail":null,"releasedate":"2014/08/28 0:00:00","jancode":"4934054783236","preorderitem":0,"saletopitem":0,"resale_flg":0,"preowned_sale_flg":null,"for_women_flg":0,"genre_moe":0,"cate6":null,"cate7":null,"buy_flg":1,"buy_price":4000,"buy_remarks":null,"stock_flg":1,"image_on":1,"image_category":"141/","image_name":"FIGURE-005314","metaalt":null},{"gcode":"TOY-GDM-1617-R","gname":"Robot Spirits -SIDE MS- Banshee From \"Mobile Suit Gundam Unicorn\"","thumb_url":"/images/product/main/121/TOY-GDM-1617.jpg","thumb_alt":"TOY-GDM-1617.jpg","thumb_title":"Robot Spirits -SIDE MS- Banshee From \"Mobile Suit Gundam Unicorn\"","min_price":2480,"max_price":3080,"c_price_taxed":4536,"maker_name":"Bandai","saleitem":0,"condition_flg":1,"list_preorder_available":0,"list_backorder_available":0,"list_store_bonus":0,"list_amiami_limited":0,"instock_flg":1,"order_closed_flg":0,"element_id":null,"salestatus":null,"salestatus_detail":null,"releasedate":"2013/06/28 0:00:00","jancode":"4543112716989","preorderitem":0,"saletopitem":0,"resale_flg":0,"preowned_sale_flg":null,"for_women_flg":0,"genre_moe":0,"cate6":null,"cate7":null,"buy_flg":1,"buy_price":1900,"buy_remarks":null,"stock_flg":1,"image_on":1,"image_category":"121/","image_name":"TOY-GDM-1617","metaalt":null},{"gcode":"TOY-RBT-1393-R","gname":"Revoltech Yamaguchi No.103 Jehuty from Anubis: Zone of the Enders","thumb_url":"/images/product/main/112/TOY-RBT-1393.jpg","thumb_alt":"TOY-RBT-1393.jpg","thumb_title":"Revoltech Yamaguchi No.103 Jehuty from Anubis: Zone of the Enders","min_price":null,"max_price":null,"c_price_taxed":null,"maker_name":"Kaiyodo","saleitem":0,"condition_flg":1,"list_preorder_available":0,"list_backorder_available":0,"list_store_bonus":0,"list_amiami_limited":0,"instock_flg":0,"order_closed_flg":0,"element_id":null,"salestatus":null,"salestatus_detail":null,"releasedate":"2011/07/19 0:00:00","jancode":"4537807010438","preorderitem":0,"saletopitem":0,"resale_flg":0,"preowned_sale_flg":null,"for_women_flg":0,"genre_moe":0,"cate6":null,"cate7":null,"buy_flg":1,"buy_price":1100,"buy_remarks":null,"stock_flg":1,"image_on":1,"image_category":"112/","image_name":"TOY-RBT-1393","metaalt":null},{"gcode":"FIGURE-011914-R","gname":"S.H. Figuarts - Kamen Rider Drive Type Speed \"Kamen Rider Drive\"","thumb_url":"/images/product/main/152/FIGURE-011914.jpg","thumb_alt":"FIGURE-011914.jpg","thumb_title":"S.H. Figuarts - Kamen Rider Drive Type Speed \"Kamen Rider Drive\"","min_price":5980,"max_price":5980,"c_price_taxed":4320,"maker_name":"Bandai","saleitem":0,"condition_flg":1,"list_preorder_available":0,"list_backorder_available":0,"list_store_bonus":0,"list_amiami_limited":0,"instock_flg":1,"order_closed_flg":0,"element_id":null,"salestatus":null,"salestatus_detail":null,"releasedate":"2015/04/30 0:00:00","jancode":"4543112935649","preorderitem":0,"saletopitem":0,"resale_flg":0,"preowned_sale_flg":null,"for_women_flg":0,"genre_moe":0,"cate6":null,"cate7":null,"buy_flg":1,"buy_price":3700,"buy_remarks":null,"stock_flg":1,"image_on":1,"image_category":"152/","image_name":"FIGURE-011914","metaalt":null},{"gcode":"FIG-MOE-03718-R","gname":"ONE PIECE DX GIRLS SNAP COLLECTION Part.1 Nami (Game-prize)","thumb_url":"/images/product/main/124/FIG-MOE-03718.jpg","thumb_alt":"FIG-MOE-03718.jpg","thumb_title":"ONE PIECE DX GIRLS SNAP COLLECTION Part.1 Nami (Game-prize)","min_price":1380,"max_price":1380,"c_price_taxed":0,"maker_name":"Banpresto","saleitem":0,"condition_flg":1,"list_preorder_available":0,"list_backorder_available":0,"list_store_bonus":0,"list_amiami_limited":0,"instock_flg":1,"order_closed_flg":0,"element_id":null,"salestatus":null,"salestatus_detail":null,"releasedate":"2011/04/19 0:00:00","jancode":null,"preorderitem":0,"saletopitem":0,"resale_flg":0,"preowned_sale_flg":null,"for_women_flg":0,"genre_moe":0,"cate6":null,"cate7":null,"buy_flg":1,"buy_price":600,"buy_remarks":null,"stock_flg":1,"image_on":1,"image_category":"124/","image_name":"FIG-MOE-03718","metaalt":null},{"gcode":"FIGURE-031081-R","gname":"\"Darkstalkers\" Series Noodle Stopper Figure -Morrigan- 1P Color (Game-prize)","thumb_url":"/images/product/main/174/FIGURE-031081.jpg","thumb_alt":"FIGURE-031081.jpg","thumb_title":"\"Darkstalkers\" Series Noodle Stopper Figure -Morrigan- 1P Color (Game-prize)","min_price":2880,"max_price":2880,"c_price_taxed":0,"maker_name":"FuRyu","saleitem":0,"condition_flg":1,"list_preorder_available":0,"list_backorder_available":0,"list_store_bonus":0,"list_amiami_limited":0,"instock_flg":1,"order_closed_flg":0,"element_id":null,"salestatus":null,"salestatus_detail":null,"releasedate":"2017/12/31 0:00:00","jancode":null,"preorderitem":0,"saletopitem":0,"resale_flg":0,"preowned_sale_flg":null,"for_women_flg":0,"genre_moe":0,"cate6":null,"cate7":null,"buy_flg":1,"buy_price":1600,"buy_remarks":null,"stock_flg":1,"image_on":1,"image_category":"174/","image_name":"FIGURE-031081","metaalt":null},{"gcode":"FIGURE-034256-R","gname":"ONE PIECE FLAG DIAMOND SHIP -NICO.ROBIN- (Collectable Prize)","thumb_url":"/images/product/main/174/FIGURE-034256.jpg","thumb_alt":"FIGURE-034256.jpg","thumb_title":"ONE PIECE FLAG DIAMOND SHIP -NICO.ROBIN- (Collectable Prize)","min_price":1380,"max_price":1380,"c_price_taxed":0,"maker_name":"Banpresto","saleitem":0,"condition_flg":1,"list_preorder_available":0,"list_backorder_available":0,"list_store_bonus":0,"list_amiami_limited":0,"instock_flg":1,"order_closed_flg":0,"element_id":null,"salestatus":null,"salestatus_detail":null,"releasedate":"2018/03/31 0:00:00","jancode":null,"preorderitem":0,"saletopitem":0,"resale_flg":0,"preowned_sale_flg":null,"for_women_flg":0,"genre_moe":0,"cate6":null,"cate7":null,"buy_flg":1,"buy_price":600,"buy_remarks":null,"stock_flg":1,"image_on":1,"image_category":"174/","image_name":"FIGURE-034256","metaalt":null},{"gcode":"FIGURE-034775-R","gname":"BRING ARTS - NieR:Automata: 2B & Machine Lifeform (2 Figure Set) Action Figure","thumb_url":"/images/product/main/174/FIGURE-034775.jpg","thumb_alt":"FIGURE-034775.jpg","thumb_title":"BRING ARTS - NieR:Automata: 2B & Machine Lifeform (2 Figure Set) Action Figure","min_price":9480,"max_price":10480,"c_price_taxed":9504,"maker_name":"Square Enix","saleitem":0,"condition_flg":1,"list_preorder_available":0,"list_backorder_available":0,"list_store_bonus":0,"list_amiami_limited":0,"instock_flg":1,"order_closed_flg":0,"element_id":null,"salestatus":null,"salestatus_detail":null,"releasedate":"2018/04/30 0:00:00","jancode":"4988601332903","preorderitem":0,"saletopitem":0,"resale_flg":0,"preowned_sale_flg":null,"for_women_flg":0,"genre_moe":0,"cate6":null,"cate7":null,"buy_flg":1,"buy_price":6300,"buy_remarks":null,"stock_flg":1,"image_on":1,"image_category":"174/","image_name":"FIGURE-034775","metaalt":null},{"gcode":"FIGURE-035428-R","gname":"Code Geass: Lelouch of the Rebellion EXQ Figure -Lelouch Lamperouge- (Collectable Prize)","thumb_url":"/images/product/main/174/FIGURE-035428.jpg","thumb_alt":"FIGURE-035428.jpg","thumb_title":"Code Geass: Lelouch of the Rebellion EXQ Figure -Lelouch Lamperouge- (Collectable Prize)","min_price":1280,"max_price":1280,"c_price_taxed":0,"maker_name":"Banpresto","saleitem":0,"condition_flg":1,"list_preorder_available":0,"list_backorder_available":0,"list_store_bonus":0,"list_amiami_limited":0,"instock_flg":1,"order_closed_flg":0,"element_id":null,"salestatus":null,"salestatus_detail":null,"releasedate":"2018/04/30 0:00:00","jancode":null,"preorderitem":0,"saletopitem":0,"resale_flg":0,"preowned_sale_flg":null,"for_women_flg":0,"genre_moe":0,"cate6":null,"cate7":null,"buy_flg":1,"buy_price":200,"buy_remarks":null,"stock_flg":1,"image_on":1,"image_category":"174/","image_name":"FIGURE-035428","metaalt":null}],"_embedded":{"category_tags":[{"id":1,"name":"Figures Categories","count":2780},{"id":14,"name":"Bishoujo Figure","count":2215},{"id":15,"name":"Character Figures","count":528},{"id":4,"name":"Gundam Toys","count":481},{"id":6,"name":"Tokusatsu Toys","count":397},{"id":5,"name":"Robots","count":368},{"id":10,"name":"Character Goods","count":143},{"id":24,"name":"Goods / Costume","count":98},{"id":23,"name":"Trading Figures","count":46},{"id":3,"name":"Scale Models","count":44},{"id":2,"name":"Dolls","count":35},{"id":16,"name":"Foreign Figures","count":32},{"id":17,"name":"Scale/Military","count":30},{"id":9,"name":"Video Games","count":21},{"id":8,"name":"Books/Mangas","count":10},{"id":18,"name":"Car Plastic Model Kits","count":8},{"id":13,"name":"Age Restricted Products","count":5},{"id":19,"name":"Car Models","count":5},{"id":26,"name":"DVDs","count":2},{"id":7,"name":"Videos & Music","count":2},{"id":12,"name":"Toys","count":1},{"id":34,"name":"Kid's Toys","count":1}],"makers":[{"id":2,"name":"Bandai","count":1123},{"id":4546,"name":null,"count":628},{"id":4277,"name":null,"count":515},{"id":139,"name":"Banpresto","count":442},{"id":4545,"name":null,"count":352},{"id":48,"name":"Good Smile Company","count":323},{"id":14,"name":"Kotobukiya","count":265},{"id":39,"name":"Max Factory","count":248},{"id":24,"name":"MegaHouse","count":149},{"id":56,"name":"Alter","count":118},{"id":5042,"name":"SEGA Interactive","count":108},{"id":5201,"name":"SEGA Prize!","count":106},{"id":93,"name":"Takara Tomy","count":99},{"id":27,"name":"Kaiyodo","count":88},{"id":32,"name":"WAVE","count":86},{"id":272,"name":"FuRyu","count":81},{"id":55,"name":"SEGA","count":61},{"id":4278,"name":null,"count":61},{"id":5044,"name":"SEGA Games","count":61},{"id":77,"name":"FREEing","count":56},{"id":138,"name":"Taito","count":51},{"id":253,"name":"Phat Company","count":51},{"id":68,"name":"Griffon Enterprises","count":49},{"id":3871,"name":"KADOKAWA","count":44},{"id":25,"name":"HobbyJAPAN","count":39},{"id":45,"name":"OrchidSeed","count":36},{"id":132,"name":"Chara-ani","count":28},{"id":46,"name":"azone international","count":26},{"id":4550,"name":null,"count":25},{"id":33,"name":"Volks","count":24},{"id":13,"name":"Square Enix","count":23},{"id":53,"name":"Aoshima","count":23},{"id":4548,"name":null,"count":22},{"id":9,"name":"Medicom Toy","count":19},{"id":69,"name":"cLayz","count":19},{"id":246,"name":"SkyTube","count":19},{"id":170,"name":"ques Q","count":18},{"id":4363,"name":null,"count":18},{"id":5116,"name":"AMAKUNI","count":17},{"id":80,"name":"ASCII Media Works","count":16},{"id":5192,"name":null,"count":16},{"id":101,"name":"Aniplex","count":15},{"id":283,"name":"Sony Music Entertainment","count":15},{"id":439,"name":"Plum","count":15},{"id":4357,"name":"PM Office A","count":15},{"id":1,"name":"Movic","count":14},{"id":1361,"name":"Eicoh","count":14},{"id":3018,"name":"PULCHRA","count":14},{"id":18,"name":"Medicos Entertainment","count":13},{"id":21,"name":"YAMATO","count":13},{"id":123,"name":"Alphamax","count":13},{"id":164,"name":"Daiki Kogyo","count":13},{"id":79,"name":"Konami","count":12},{"id":454,"name":"FunnyKnights","count":12},{"id":553,"name":"Q-six","count":12},{"id":4549,"name":null,"count":12},{"id":37,"name":"Hasegawa","count":11},{"id":40,"name":"Tomytec","count":11},{"id":307,"name":"Union Creative","count":11},{"id":762,"name":"Sentinel","count":11},{"id":4343,"name":"Mabell","count":11},{"id":4552,"name":null,"count":11},{"id":6458,"name":"Bandai","count":11},{"id":47,"name":"Toy'sworks","count":10},{"id":270,"name":"Kaitendo","count":10},{"id":1166,"name":"Di molto bene","count":10},{"id":2478,"name":"Orca Toys","count":10},{"id":2388,"name":"DRAGON Toy","count":9},{"id":4421,"name":"Switch","count":9},{"id":6459,"name":null,"count":9},{"id":924,"name":"Hobby Stock","count":8},{"id":1632,"name":null,"count":8},{"id":2095,"name":"Vertex","count":8},{"id":5023,"name":"Orange Rouge","count":8},{"id":11,"name":"COSPA","count":7},{"id":71,"name":"Fujimi","count":7},{"id":103,"name":"Hot Toys","count":7},{"id":277,"name":"Takara Tomy A.R.T.S","count":7},{"id":1908,"name":"Aquamarine","count":7},{"id":4335,"name":null,"count":7},{"id":4601,"name":"Resinya!","count":7},{"id":23,"name":"CM's Corporation","count":6},{"id":75,"name":"Solid Theater","count":6},{"id":140,"name":"Good Smile Racing","count":6},{"id":262,"name":"Enterbrain","count":6},{"id":273,"name":"Broccoli","count":6},{"id":308,"name":"X-PLUS","count":6},{"id":865,"name":"Konami Digital Entertainment","count":6},{"id":1532,"name":"R-Line","count":6},{"id":4555,"name":null,"count":6},{"id":66,"name":"Wafudo Ganguten","count":5},{"id":95,"name":"Atelier Sai","count":5},{"id":154,"name":"Platz","count":5},{"id":155,"name":"Penguin Parade","count":5},{"id":335,"name":"Beat","count":5},{"id":594,"name":"Yujin","count":5},{"id":2585,"name":"Sunny Side Up","count":5},{"id":3679,"name":"Oh-ami","count":5},{"id":38,"name":"amiami","count":4},{"id":51,"name":"Art Storm","count":4}],"series_titles":[{"id":1139,"name":"\"Nendoroid\" Series","count":261},{"id":2,"name":"Nendoroid","count":233},{"id":237,"name":"S.H. Figuarts","count":233},{"id":1141,"name":"figma Series","count":206},{"id":40,"name":"figma","count":190},{"id":15,"name":"Robot Spirits","count":181},{"id":867,"name":"HG Series","count":168},{"id":636,"name":"Ichiban Kuji","count":103},{"id":1140,"name":"\"Excellent Model\" Series","count":86},{"id":79,"name":"HGUC (High Grade Universal Century)","count":82},{"id":329,"name":"S.I.C.","count":81},{"id":477,"name":"Revoltech","count":79},{"id":9724,"name":"Kotobukiya","count":75},{"id":9729,"name":"Kotobukiya Complete Figure","count":75},{"id":123,"name":"MG (Master Grade)","count":71},{"id":9720,"name":"Kotobukiya 1/8 Complete Figure","count":57},{"id":297,"name":"1/144-HG Series","count":56},{"id":7084,"name":"BEACH QUEENS","count":52},{"id":69,"name":"BEACH QUEENS","count":51},{"id":4385,"name":"World Collectable Figure","count":44},{"id":4,"name":"Portrait.Of.Pirates","count":43},{"id":396,"name":"Frame Arms","count":41},{"id":706,"name":"Premium Figure","count":32},{"id":11,"name":"Chogokin","count":30},{"id":68,"name":"Revoltech Yamaguchi","count":27},{"id":314,"name":"Armor Girls Project","count":26},{"id":8678,"name":"B-STYLE","count":26},{"id":298,"name":"BB Senshi","count":25},{"id":465,"name":"HGBF (High Grade Build Fighters)","count":25},{"id":10443,"name":"Super Premium Figure","count":25},{"id":144,"name":"Nendoroid Petite","count":22},{"id":142,"name":"Cu-poche","count":21},{"id":1144,"name":"ARTFX Series","count":21},{"id":8604,"name":"Frame Arms Girl","count":20},{"id":9733,"name":null,"count":19},{"id":9734,"name":"Phat Company 1/8 Complete Figure","count":19},{"id":402,"name":"Revoltech Takeya","count":17},{"id":106,"name":"Play Arts Kai","count":16},{"id":917,"name":"Ichiban Kuji Premium","count":16},{"id":996,"name":"figFIX","count":16},{"id":2007,"name":"Transformers Movie","count":16},{"id":2027,"name":"Play Arts","count":16},{"id":313,"name":"DreamTech","count":15},{"id":431,"name":"Yamato Girls Collection","count":15},{"id":1007,"name":"Excellent Model CORE","count":15},{"id":14,"name":"S.H.MonsterArts","count":14},{"id":525,"name":"Chozo Series","count":14},{"id":2021,"name":"MS In Action","count":14},{"id":7595,"name":"KyunChara","count":14},{"id":8646,"name":"Noodle Stopper Figure","count":14},{"id":5,"name":"Saint Cloth Myth","count":13},{"id":118,"name":"Tokusatsu (Sci-Fi) Revoltech","count":13},{"id":211,"name":"Real Action Heroes","count":13},{"id":695,"name":"KyunChara","count":13},{"id":1802,"name":"METAL BUILD","count":13},{"id":6860,"name":"Q posket","count":13},{"id":8257,"name":"Plastic Model","count":13},{"id":17,"name":"Figuarts ZERO","count":12},{"id":205,"name":"Super Action Statue","count":12},{"id":239,"name":"Super Robot Chogokin ","count":12},{"id":722,"name":"Chibi KyunChara","count":12},{"id":1008,"name":"Excellent Model RAHDX","count":12},{"id":3837,"name":"Moekore PLUS","count":12},{"id":9721,"name":"Kotobukiya 1/7 Complete Figure","count":12},{"id":219,"name":"ARTFX+","count":11},{"id":296,"name":"RG (Real Grade)","count":11},{"id":316,"name":"4-Leaves","count":11},{"id":1275,"name":"Bandai 1/100 Plastic Model","count":11},{"id":6505,"name":"Minna no Kuji","count":11},{"id":16,"name":"S.I.C. Kiwami Damashii","count":10},{"id":490,"name":"ARTFX J","count":10},{"id":507,"name":"Tamashii SPEC","count":10},{"id":3,"name":"Excellent Model","count":9},{"id":1296,"name":"Premium Game-prize (Taito)","count":9},{"id":13,"name":"ULTRA-ACT","count":8},{"id":28,"name":"\"Pure Neemo\" Series","count":8},{"id":292,"name":"V.I. Series","count":8},{"id":342,"name":"Variable Action Series","count":8},{"id":4437,"name":"Makai Kadou","count":8},{"id":10112,"name":"Figure-rise Bust","count":8},{"id":12,"name":"D-Arts","count":7},{"id":81,"name":"Statue Legend","count":7},{"id":178,"name":"EX Cute","count":7},{"id":285,"name":"FW Series","count":7},{"id":648,"name":"DX Figure","count":7},{"id":1009,"name":"Excellent Model LIMITED","count":7},{"id":1294,"name":"Character Vocal Series","count":7},{"id":1974,"name":"Sarah's a la Mode","count":7},{"id":2063,"name":"Resinya!","count":7},{"id":7838,"name":"Plastic Model: 1/144","count":7},{"id":35,"name":"G.E.M.","count":6},{"id":1010,"name":"BISHOUJO Statue","count":6},{"id":1019,"name":"1/3 Hybrid Active Figure","count":6},{"id":1074,"name":"Pure Neemo M Size","count":6},{"id":2086,"name":"Shining Wind Figure Series","count":6},{"id":2309,"name":"ex:ride","count":6},{"id":4067,"name":"Extra (Sega)","count":6},{"id":4646,"name":"Transformers: Prime","count":6},{"id":6197,"name":"DXF Figure","count":6},{"id":7519,"name":"Hybrid Active Figure","count":6}],"original_titles":[{"id":12790,"name":"\"Gundam\" Series","count":494},{"id":12806,"name":"\"Kamen Rider\" Series","count":299},{"id":6837,"name":"Kantai Collection -Kan Colle-","count":245},{"id":15500,"name":"\"Love Live!\" Series","count":149},{"id":11,"name":"ONE PIECE","count":138},{"id":12799,"name":"\"Fate\" Series","count":115},{"id":13191,"name":"\"THE IDOLM@STER\" Series","count":102},{"id":276,"name":"\"VOCALOID\" Series","count":97},{"id":2557,"name":"Love Live!","count":88},{"id":4982,"name":"Girls und Panzer","count":79},{"id":211,"name":"Touhou Project","count":75},{"id":15931,"name":"\"Girls und Panzer\" Series","count":75},{"id":13170,"name":"\"Transformers\" Series","count":73},{"id":13193,"name":"THE IDOLM@STER Cinderella Girls","count":69},{"id":192,"name":"Mobile Suit Gundam Unicorn","count":63},{"id":16,"name":"Mobile Suit Gundam","count":60},{"id":16522,"name":"Love Live! Sunshine!!","count":59},{"id":13,"name":"Mobile Suit Gundam SEED","count":57},{"id":2179,"name":"Puella Magi Madoka Magica","count":56},{"id":13326,"name":"\"The Super Dimension\" Series","count":54},{"id":12841,"name":"\"Dragon Ball\" Series","count":51},{"id":12816,"name":"\"Macross\" Series","count":50},{"id":965,"name":"\"Monogatari\" Series","count":47},{"id":20810,"name":"\"Puella Magi Madoka Magica\" Series","count":47},{"id":91,"name":"Mobile Suit Gundam 00","count":45},{"id":11953,"name":"Frame Arms","count":44},{"id":1678,"name":"Kamen Rider OOO","count":42},{"id":1018,"name":"\"Code Geass\" Series","count":41},{"id":13269,"name":"\"ToHeart2\" Series","count":39},{"id":13399,"name":"\"Evangelion\" Series","count":39},{"id":163,"name":"Code Geass: Lelouch of the Rebellion","count":36},{"id":13220,"name":"\"Strike Witches\" Series","count":36},{"id":36,"name":"ToHeart2","count":35},{"id":170,"name":"Macross Frontier","count":35},{"id":14246,"name":"\"Sword Art Online\" Series","count":35},{"id":2,"name":"Mobile Suit Zeta Gundam","count":34},{"id":6,"name":"Mobile Suit Gundam SEED Destiny","count":34},{"id":490,"name":"Lupin the 3rd","count":34},{"id":12793,"name":"\"Shining\" Series","count":34},{"id":12803,"name":"\"Lyrical Nanoha\" Series","count":34},{"id":13957,"name":"\"Queen\\'s Blade\" Series","count":33},{"id":15985,"name":"Girls und Panzer the Movie","count":32},{"id":83,"name":"THE IDOLM@STER (THE IDOLMASTER)","count":29},{"id":15106,"name":"Fate/Grand Order","count":29},{"id":15384,"name":"\"Gundam Build Fighters\" Series","count":29},{"id":476,"name":"Kamen Rider W","count":28},{"id":74,"name":"Space Battleship Yamato (Star Blazers)","count":27},{"id":13028,"name":"Dragon Ball Z","count":27},{"id":14145,"name":"Kamen Rider Drive","count":26},{"id":6803,"name":"Kamen Rider Gaim","count":25},{"id":13404,"name":"\"Rebuild of Evangelion\" Series","count":25},{"id":16653,"name":"Mobile Suit Gundam: Iron-Blooded Orphans","count":25},{"id":247,"name":"K-On!","count":24},{"id":13691,"name":"Space Battleship Yamato (Star Blazers) 2199","count":24},{"id":14297,"name":"\"To Love-Ru\" Series","count":24},{"id":19363,"name":"\"Oreimo (My Little Sister Can't Be This Cute)\" Series","count":24},{"id":37,"name":"Kamen Rider Ryuki","count":23},{"id":237,"name":"\"JoJo's Bizarre Adventure\" Series","count":23},{"id":136,"name":"Fate/stay night","count":22},{"id":191,"name":"Kamen Rider Den-O","count":22},{"id":203,"name":"Strike Witches","count":22},{"id":3675,"name":"Nitroplus","count":22},{"id":17784,"name":"Macross Delta","count":22},{"id":49,"name":"The Melancholy of Haruhi Suzumiya","count":21},{"id":14247,"name":"\"Infinite Stratos (IS)\" Series","count":21},{"id":152,"name":"Aura Battler Dunbine","count":20},{"id":2141,"name":"Infinite Stratos (IS)","count":20},{"id":2652,"name":"Marvel Comics","count":20},{"id":12802,"name":"Magical Girl Lyrical Nanoha StrikerS","count":20},{"id":12810,"name":"\"Ultraman\" Series","count":20},{"id":13340,"name":"To Love-Ru Darkness","count":20},{"id":15629,"name":"\"Godzilla\" Series","count":20},{"id":17179,"name":"\"GARO\" Series","count":20},{"id":19361,"name":"\"K-On!\" Series","count":20},{"id":4993,"name":"Kamen Rider Wizard","count":19},{"id":16405,"name":"Dragon Ball Super","count":19},{"id":7522,"name":"\"SD Gundam\" Series","count":18},{"id":14802,"name":"\"The Melancholy of Haruhi Suzumiya\" Series","count":18},{"id":15089,"name":"\"Super Sonico\" Series","count":18},{"id":15826,"name":"\"Arpeggio of Blue Steel\" Series","count":18},{"id":1,"name":"Neon Genesis Evangelion","count":17},{"id":23,"name":"Kamen Rider","count":17},{"id":12630,"name":"Is the order a rabbit? (Gochuumon wa Usagi desu ka?)","count":17},{"id":12809,"name":"\"PreCure\" Series","count":17},{"id":13868,"name":"Transformers: Revenge","count":17},{"id":26,"name":"Mobile Suit Gundam ZZ","count":16},{"id":38,"name":"Kamen Rider 555 (Faiz)","count":16},{"id":64,"name":"Disney","count":16},{"id":1292,"name":"Oreimo (My Little Sister Can't Be This Cute)","count":16},{"id":13235,"name":"\"Super Robot Wars\" Series","count":16},{"id":15499,"name":"Love Live! School Idol Festival","count":16},{"id":16064,"name":"\"Star Wars\" Series","count":16},{"id":16945,"name":"Is the order a rabbit?? (Gochuumon wa Usagi desu ka? 2nd Season)","count":16},{"id":43,"name":"Mobile Suit Gundam: Char's Counterattack","count":15},{"id":440,"name":"Bakemonogatari","count":15},{"id":473,"name":"GARO","count":15},{"id":5314,"name":"Visual Arts","count":15},{"id":13978,"name":"Puella Magi Madoka Magica the Movie [New] The Rebellion Story","count":15},{"id":35,"name":"Queen\\'s Blade","count":14},{"id":485,"name":"\"Hyakka Ryoran\" Series","count":14}],"character_names":[{"id":8011,"name":"Hatsune Miku","count":72},{"id":7973,"name":"Altria Pendragon(Saber/Saber Lily/Saber Alter)","count":50},{"id":7914,"name":"Son Goku","count":30},{"id":8004,"name":"Boa Hancock","count":24},{"id":7951,"name":"Nami","count":22},{"id":6116,"name":"Super Sonico","count":21},{"id":7793,"name":"Godzilla","count":20},{"id":6787,"name":"Asuna Yuuki(Asuna/Titania)","count":19},{"id":1169,"name":"Hanayo Koizumi","count":18},{"id":4820,"name":"Fujiko Mine","count":18},{"id":1802,"name":"Tony Tony Chopper(Chopper)","count":17},{"id":12540,"name":"Nero Claudius(Saber)","count":17},{"id":2395,"name":"Kotori Minami","count":16},{"id":4543,"name":"Mami Tomoe","count":16},{"id":5606,"name":"Miho Nishizumi","count":15},{"id":6786,"name":"Kamen Rider OOO","count":15},{"id":7460,"name":"Convoy(Optimus Prime)","count":15},{"id":7899,"name":"Fate Testarossa(Fate T. Harlaown)","count":15},{"id":8297,"name":"Kamen Rider Wizard","count":15},{"id":1170,"name":"Rin Hoshizora","count":14},{"id":1270,"name":"Shinobu Oshino(Kiss Shot Acerola Orion Heart Under Blade)","count":14},{"id":3948,"name":"Yukari Akiyama","count":14},{"id":5883,"name":"Homura Akemi","count":14},{"id":2912,"name":"Honoka Kosaka","count":13},{"id":5459,"name":"Kuroneko(Ruri Gokou)","count":13},{"id":7675,"name":"Ranka Lee","count":13},{"id":7874,"name":"Manaka Komaki","count":13},{"id":7975,"name":"Tamaki Kosaka","count":13},{"id":1168,"name":"Eli Ayase","count":12},{"id":5296,"name":"Kyoko Sakura","count":12},{"id":7708,"name":"Sheryl Nome","count":12},{"id":8010,"name":"Portgas D. Ace(Ace)","count":12},{"id":20293,"name":"You Watanabe","count":12},{"id":6082,"name":"Danboard","count":11},{"id":14206,"name":"Kamen Rider Drive","count":11},{"id":2911,"name":"Umi Sonoda","count":10},{"id":4754,"name":"Rin Shibuya","count":10},{"id":6029,"name":"Nozomi Tojo","count":10},{"id":6537,"name":"Maki Nishikino","count":10},{"id":6689,"name":"Kamen Rider Fourze","count":10},{"id":7521,"name":"Kirino Kousaka","count":10},{"id":7578,"name":"Miki Hoshii","count":10},{"id":7804,"name":"Reimu Hakurei","count":10},{"id":7860,"name":"Iron Man","count":10},{"id":8013,"name":"Rei Ayanami","count":10},{"id":8164,"name":"Garo(Garo)","count":10},{"id":10154,"name":"Kongo","count":10},{"id":11322,"name":"Chiyomi Anzai(Anchovy)","count":10},{"id":0,"name":null,"count":9},{"id":245,"name":"Yuki Mori","count":9},{"id":5978,"name":"Hitagi Senjougahara","count":9},{"id":6166,"name":"Madoka Kaname","count":9},{"id":7812,"name":"Yoshika Miyafuji","count":9},{"id":7939,"name":"Nanoha Takamachi","count":9},{"id":10248,"name":"Maho Nishizumi","count":9},{"id":10984,"name":"Shokaku","count":9},{"id":20292,"name":"Dia Kurosawa","count":9},{"id":20295,"name":"Hanamaru Kunikida","count":9},{"id":3947,"name":"Saori Takebe","count":8},{"id":4812,"name":"Cecilia Alcott","count":8},{"id":6052,"name":"Haruka Amami","count":8},{"id":6501,"name":"Mari Makinami Illustrious","count":8},{"id":7398,"name":"Nico Robin","count":8},{"id":7942,"name":"Mikoto Misaka","count":8},{"id":10365,"name":"Shimakaze","count":8},{"id":10527,"name":"Kaga","count":8},{"id":10930,"name":"Yamato","count":8},{"id":10985,"name":"Zuikaku","count":8},{"id":16892,"name":"Gourai","count":8},{"id":20289,"name":"Chika Takami","count":8},{"id":19,"name":"Mikan Yuuki","count":7},{"id":1876,"name":"Golden Darkness (Konjiki no Yami)","count":7},{"id":3153,"name":"Celia Cumani Aintree","count":7},{"id":3284,"name":"Ranko Kanzaki","count":7},{"id":3808,"name":"Sakura Kinomoto (Sakura Avalon)","count":7},{"id":3949,"name":"Mako Reizei","count":7},{"id":7488,"name":"Remilia Scarlet","count":7},{"id":7581,"name":"Trunks","count":7},{"id":7626,"name":"Tsubasa Hanekawa","count":7},{"id":7702,"name":"Asuka Langley Soryu","count":7},{"id":7902,"name":"Azusa Nakano","count":7},{"id":7976,"name":"Haruhi Suzumiya","count":7},{"id":9060,"name":"Kamen Rider Den-O","count":7},{"id":9231,"name":"Kamen Rider Faiz","count":7},{"id":10080,"name":"Kamen Rider Gaim","count":7},{"id":10347,"name":"Akagi","count":7},{"id":10509,"name":"Nagato","count":7},{"id":10710,"name":"Kudryavka Noumi(Kud)","count":7},{"id":10823,"name":"Takao","count":7},{"id":24327,"name":"Kashima","count":7},{"id":1555,"name":"Hibiki Ganaha","count":6},{"id":4231,"name":"Chihaya Kisaragi","count":6},{"id":4811,"name":"Charlotte Dunois","count":6},{"id":5329,"name":"Kamen Rider 1","count":6},{"id":5969,"name":"Mio Honda","count":6},{"id":6260,"name":"Kazuto Kirigaya(Kirito)","count":6},{"id":6576,"name":"Kamen Rider Agito","count":6},{"id":7333,"name":"Kagamine Rin","count":6},{"id":7466,"name":"Kagami Hiiragi","count":6},{"id":7529,"name":"Lupin the 3rd","count":6}],"elements":[{"id":398,"name":"Figures","count":7},{"id":401,"name":"Complete Figure","count":7},{"id":360,"name":"Scale","count":5},{"id":404,"name":"Action Figure","count":3},{"id":455,"name":"Toys","count":3},{"id":54,"name":"Plastic Model","count":3},{"id":386,"name":"1/100","count":2},{"id":495,"name":"Non-Scale","count":2},{"id":508,"name":"Trading / Collection","count":2},{"id":370,"name":"1/12","count":1},{"id":490,"name":"Deformed","count":1},{"id":602,"name":"Foods","count":1},{"id":627,"name":"Gum","count":1},{"id":956,"name":"Prize","count":1}]}}"""))
        val result = amiamiRestClient.items(UpdateComponent.CATEGORY_FIGURE_DOLL, UpdateComponent.PER_PAGE, 1)
        Assert.assertTrue(result.success)
        Assert.assertEquals(20, result.items?.size)
        val request = server.takeRequest()
        Assert.assertEquals("/items" +
            "?s_sortkey=preowned" +
            "&s_st_condition_flg=1" +
            "&lang=eng" +
            "&s_cate_tag=${UpdateComponent.CATEGORY_FIGURE_DOLL}" +
            "&pagemax=${UpdateComponent.PER_PAGE}" +
            "&pagecnt=1", request.path)
        Assert.assertEquals("amiami_dev", request.headers["x-user-key"])
    }

    @Test(expected = HttpServerErrorException::class)
    fun testFailedRequest() {
        server.enqueue(MockResponse().setResponseCode(HttpStatus.INTERNAL_SERVER_ERROR.value()))
        amiamiRestClient.items(UpdateComponent.CATEGORY_FIGURE_DOLL, UpdateComponent.PER_PAGE, 1)
    }

    @After
    fun after() {
        server.close()
    }
}
